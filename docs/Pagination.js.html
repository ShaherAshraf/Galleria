<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Pagination.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Pagination.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState, useEffect } from 'react';
import { useHistory } from 'react-router';
import { Link } from 'react-router-dom';

/**
 * @component @name Pagination
 * @description A reusable pagination component.
 * @param {object} props
 * @param {number} props.totalPosts - the total retrieved data from a source (ex: endPoint).
 * @param {number} props.postsPerPage - the total elements to be displayed in every single page.
 * @param {string} props.pageName - the name of the page that shows in the url.
 * @param {object} [props.triggerFunction] - a function to fetch data inside the use effect hook &amp; causes a component rerender.
 */
const Pagination = ({ totalPosts, postsPerPage, pageName, triggerFunction }) => {
  const history = useHistory();

  /** @typedef {number} totalPages - The total number of pages. */
  const totalPages = totalPosts / postsPerPage;

  /** @typedef {number} pager - The number of pagesLinks to show on the screen. */
  const pager = 12;

  /** @typedef {number} pagerShifts - The number of times the pager can shift/slide */
  const pagerShifts = Math.ceil(totalPages / pager);

  /** @typedef {number} startIndex - The pager start index. */
  const [startIndex, setStartIdx] = useState(0);

  /** @typedef {number} endIndex - The pager end index. */
  const [endIndex] = useState(startIndex + pager);

  /** @typedef {number} currentPage - The current page number. @default */
  const [currentPage, setCurrentPage] = useState(1);

  /** @typedef {number} resetPage - The value used to guide the pager where to show up. */
  const resetPage = parseInt(window.location.search.slice(6));

  useEffect(() => {
    /**
     * @function resetPagerBoundaries
     * @description Resets the pager start &amp; end according to the current active page.
     * @example
     * ex: pager = 5;
     * if (currentPage >= 6) {
     *  setStartIdx(5); // ((index * pager) => (1 * 5)) and so on...
     * }
     */
    const resetPagerBoundaries = () => {
      if (!resetPage) {
        setCurrentPage(1);
      } else {
        setCurrentPage(resetPage);
      }
      for (let i = 0; i &lt; pagerShifts; i++) {
        if (currentPage >= i * pager + 1) {
          setStartIdx(i * pager);
        }
      }
    };
    resetPagerBoundaries();
    triggerFunction();
  }, [currentPage]);

  /** @typedef {Array} pagesLinks - A placeholder for all autogenerated pagesLinks. */
  let pagesLinks = [];

  /**
   * @function generatePagesLinks
   * @description Generates pages links (the numbered buttons).
   */
  const generatePagesLinks = () => {
    for (let i = 0; i &lt; totalPages; i++) {
      const link = (
        &lt;Link
          key={i}
          to={`/${pageName}?page=${i + 1}`}
          className='pagesLinks'
          onClick={(e) => {
            setCurrentPage(i + 1);
            scrollToTop();
          }}
        >
          {i + 1}
        &lt;/Link>
      );
      pagesLinks.push(link);
    }
  };
  generatePagesLinks();

  /**
   * @function handlePrev
   * @description Goes to the previous page.
   * @param {object} e - The previous button event handler.
   */
  const handlePrev = (e) => {
    e.preventDefault();
    if (currentPage > 1 &amp;&amp; currentPage &lt;= totalPages) {
      setCurrentPage((currentPage) => currentPage - 1);
      history.push(`/${pageName}?page=${currentPage - 1}`);
    }
    if (!resetPage) {
      setCurrentPage(1);
    }
  };

  /**
   * @function handleNext
   * @description Goes to the next page.
   * @param {object} e - The next button event handler.
   */
  const handleNext = (e) => {
    e.preventDefault();
    if (currentPage >= 1 &amp;&amp; currentPage &lt; totalPages) {
      setCurrentPage((currentPage) => currentPage + 1);
      history.push(`/${pageName}?page=${currentPage + 1}`);
    }
    if (!resetPage) {
      setCurrentPage(2);
    }
  };

  /**
   * @function handlePagerShifts
   * @description Shifts/Slides the pager to the left/right.
   * @param {object} e - The shift button event handler.
   */
  const handlePagerShifts = (e) => {
    e.preventDefault();
    if (e.target.className.startsWith('prev')) {
      setStartIdx(startIndex - 12);
      if (startIndex == 0) {
        setStartIdx(0);
      }
    }
    if (e.target.className.startsWith('next')) {
      setStartIdx(startIndex + 12);
      if (totalPages - startIndex &lt; pager) {
        setStartIdx(startIndex + 0);
      }
    }
  };

  /**
   * @function activatePageBtn
   * @description Gives some styles to the clicked page button/link
   * &amp; waits a while until the document recognizes/loads the pagesLinks.
   */
  const activatePageBtn = () => {
    setTimeout(() => {
      const pagesLinks = document.querySelectorAll('.pagesLinks');
      for (let link of pagesLinks) {
        if (link.textContent == resetPage) {
          link.style.color = `#d4af37`;
          link.style.backgroundColor = `#212121`;
          link.style.border = `2px solid #d4af37`;
        } else {
          link.style.color = `white`;
          link.style.backgroundColor = `#070707`;
          link.style.border = `2px solid transparent`;
        }
      }
      if (pagesLinks[0] !== undefined &amp;&amp; !resetPage) {
        pagesLinks[0].style.color = `#d4af37`;
        pagesLinks[0].style.backgroundColor = `#212121`;
        pagesLinks[0].style.border = `2px solid #d4af37`;
      }
    }, 500);
  };
  activatePageBtn();

  /**
   * @function scrollToTop
   * @description Scrolls to the very top of the page after any click
   * &amp; waits a while to leave some room to the source to fetch data.
   */
  const scrollToTop = () => {
    setTimeout(() => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth',
      });
    }, 1500);
  };

  return (
    &lt;div className='Pagination'>
      &lt;Link
        to=''
        className='material-icons'
        onClick={(e) => {
          handlePrev(e);
          scrollToTop();
        }}
      >
        navigate_before
      &lt;/Link>

      &lt;Link to='' className='prev material-icons' onClick={handlePagerShifts}>
        more_horiz
      &lt;/Link>

      {pagesLinks.splice(startIndex, endIndex).map((link) => {
        return link;
      })}

      &lt;Link to='' className='next material-icons' onClick={handlePagerShifts}>
        more_horiz
      &lt;/Link>

      &lt;Link
        to=''
        className='material-icons'
        onClick={(e) => {
          handleNext(e);
          scrollToTop();
        }}
      >
        navigate_next
      &lt;/Link>
    &lt;/div>
  );
};

export default Pagination;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#activatePageBtn">activatePageBtn</a></li><li><a href="global.html#generatePagesLinks">generatePagesLinks</a></li><li><a href="global.html#handleNext">handleNext</a></li><li><a href="global.html#handlePagerShifts">handlePagerShifts</a></li><li><a href="global.html#handlePrev">handlePrev</a></li><li><a href="global.html#Pagination">Pagination</a></li><li><a href="global.html#resetPagerBoundaries">resetPagerBoundaries</a></li><li><a href="global.html#scrollToTop">scrollToTop</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Oct 07 2021 06:04:15 GMT+0200 (توقيت شرق أوروبا الرسمي)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
